#performs the calculation in parallel
#will return a table of calculated values

outer_wrapper_mvGSEA <- function(ys,X, v=NULL, conf = NULL, clus=4)
  
{
  
 cl <- makeCluster(mc <- getOption("cl.cores", clus)) 
  clusterExport(cl=cl, varlist=c('ys', 'X', 'v', 'conf','cl','mvGSEA','edited_speedglm_L1','edited_L1_speedglm.wfit','is.sparse','cp','control','ll.speedglm','coef.speedglm','vcov.speedglm','predict.speedglm','predict.speedlm','prediction','performance'),envir=environment())
  output <- wrapper_mvGSEA(cl=cl,ys=ys, X=X, v=v, conf=conf)
  stopCluster(cl)
  
  output_table <- Reduce(rbind, output)
  row.names(output_table) <- seq(1,ncol(ys))
  output_table
  
}
